KISSY.add("gallery/combine/1.0/index",function(b){function o(){return p?d["*"]=!0:d["*"]=!1}function w(a){var e=a.concat();b.each(a,function(a){(a=q[a])&&b.isArray(a)&&(e=e.concat(a))});return e}function x(a){var e=b.Env.mods;return r[a]||a in e}function k(a,e){var a=w(a),c={};c[s]={path:y,tag:b.buildTime,mods:[]};for(var h=b.Config.packages||b.__packages,f=0;f<a.length;f++){var g=a[f],k=!1;x(g)?a.splice(f,1):(0<g.indexOf("/")&&b.each(h,function(a,b){var h=a.path;c[b]||(c[b]={path:h,tag:a.tag||"",
mods:[]});if(0===g.indexOf(b)&&(e||d["*"]||d[b]))c[b].mods.push(g),k=!0}),(e||d["*"]||d["*"])&&!k&&c[s].mods.push(g),r[g]=!0)}b.each(c,function(a){var e=a.mods,c=a.path;if(1<e.length){var h=a.tag?"?t="+a.tag:"",a=z(c,h),d=a(e,!1),d=t(d,e,a),g=a(e,!0),a=t(g,e,a),i=0;b.each(d,function(a,b){for(;i<b;i++)j[c+e[i]+".js"+h]=a});i=0;b.each(a,function(a,b){for(;i<b;i++)j[c+e[i]+"-min.js"+h]=a})}})}function t(a,b,c){function h(a,d,f){if(d+1<f)for(var a=Math.ceil(a.length/n),f=Math.ceil((f-d)/a),j=0;j<a;){var m=
j*f+d,i=m+f,l=b.slice(m,i),l=c(l,k);l.length>n?h(l,m,i):g[i]=l;j++}else g[f]=a}var d=a.length,g={},k=-1<a.indexOf("-min.js"),j=b.length;d>n?h(a,0,j-1):g[j]=a;return g}function z(a,b){return function(c,d){var f=d?"-min.js":".js";return a+"??"+c.join(f+",")+f+b}}function u(a){return function(e){b.each(e,a)}}if(0!==b.version.indexOf("1.2"))return{config:function(){}};var A=b.use,B=b.add,C=b.__getMappedPath,s="default",n=2042,j={},q={},p=!1,r={},d={"*":!1,allPackageNumber:0},y=b.Config.base;b.use=function(a,
b,c){if(o()||d.allPackageNumber){var h=a.replace(/\s+/g,"").split(",");k(h)}return A.call(this,a,b,c)};b.add=function(a,e,c){if(o()||d.allPackageNumber)c&&c.requires?1<c.requires.length&&k(c.requires):b.isPlainObject(a)&&b.each(a,function(a){a.requires&&a.requires.length&&k(a.requires)});return B.call(this,a,e,c)};b.__getMappedPath=function(a){return j[a]||C(a)};var v={autoCombine:function(a){p=!!a},packages:u(function(a){d[a]=!0;d.allPackageNumber++}),requires:function(a){b.each(a,function(a,c){b.isArray(a)&&
(q[c]=a)})},mods:u(function(a){k(a,!0)})};return{removePackage:function(a){delete d[a];d.allPackageNumber--},config:function(a){b.each(a,function(a,c){if(b.isFunction(v[c]))v[c](a)})}}});
